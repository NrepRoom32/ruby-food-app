<!DOCTYPE html>
<html lang="lo">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∫•‡∫∞‡∫ö‡∫ª‡∫ö‡∫™‡∫±‡ªà‡∫á‡∫≠‡∫≤‡∫´‡∫≤‡∫ô - Restaurant Ordering System</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Lao:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans Lao', sans-serif;
            background: linear-gradient(135deg, #ff6b9d, #4ecdc4, #45b7d1, #96ceb4, #ffeaa7);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            min-height: 100vh;
            overflow-x: hidden;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .container {
            max-width: 500px;
            margin: 0 auto;
            padding: 10px;
            min-height: 100vh;
            position: relative;
        }

        .page {
            display: none;
            padding: 20px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            margin-bottom: 20px;
            animation: slideIn 0.5s ease-out;
        }

        .page.active {
            display: block;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        .splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #ff6b9d, #4ecdc4);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            animation: fadeOut 3s ease-in-out forwards;
        }

        @keyframes fadeOut {
            0%, 70% { opacity: 1; }
            100% { opacity: 0; visibility: hidden; }
        }

        .splash-icon {
            font-size: 120px;
            margin-bottom: 20px;
            animation: bounce 2s infinite;
        }

        .logo {
            width: 300px;
            height: 300px;
            background: linear-gradient(135deg, #ff6b9d, #ffd93d);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 120px;
            margin: 0 auto 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            animation: bounce 2s infinite;
        }

        .btn {
            background: linear-gradient(135deg, #ff6b9d, #4ecdc4);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin: 10px 0;
            transition: all 0.3s ease;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn.secondary {
            background: linear-gradient(135deg, #667eea, #764ba2);
        }

        .menu-tabs {
            display: flex;
            margin-bottom: 20px;
            border-radius: 15px;
            overflow: hidden;
            background: rgba(255, 255, 255, 0.3);
        }

        .tab-btn {
            flex: 1;
            padding: 15px;
            background: transparent;
            border: none;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #333;
        }

        .tab-btn.active {
            background: linear-gradient(135deg, #ff6b9d, #4ecdc4);
            color: white;
        }

        .menu-item {
            background: rgba(255, 255, 255, 0.8);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .menu-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
        }

        .menu-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .menu-item-name {
            font-size: 18px;
            font-weight: 600;
            color: #333;
        }

        .menu-item-price {
            font-size: 16px;
            font-weight: 700;
            color: #ff6b9d;
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .quantity-btn {
            width: 40px;
            height: 40px;
            border: none;
            border-radius: 50%;
            background: linear-gradient(135deg, #ff6b9d, #4ecdc4);
            color: white;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quantity-btn:hover {
            transform: scale(1.1);
        }

        .quantity-display {
            font-size: 18px;
            font-weight: 600;
            min-width: 30px;
            text-align: center;
        }

        .floating-cart {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #ff6b9d, #4ecdc4);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            z-index: 100;
            transition: all 0.3s ease;
        }

        .floating-cart:hover {
            transform: scale(1.1);
        }

        .cart-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #ff4757;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }

        .cart-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 200;
            display: none;
        }

        .cart-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 30px;
            border-radius: 20px;
            width: 90%;
            max-width: 400px;
            max-height: 80vh;
            overflow-y: auto;
            z-index: 201;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .cart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .cart-item-info {
            flex: 1;
        }

        .cart-item-name {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .cart-item-price {
            color: #ff6b9d;
            font-weight: 600;
        }

        .cart-total {
            font-size: 24px;
            font-weight: 700;
            color: #ff6b9d;
            text-align: center;
            margin: 20px 0;
            padding: 20px;
            background: linear-gradient(135deg, rgba(255, 107, 157, 0.1), rgba(78, 205, 196, 0.1));
            border-radius: 15px;
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 20px;
            width: 90%;
            max-width: 400px;
            text-align: center;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #333;
        }

        .input-group input {
            width: 100%;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: #ff6b9d;
        }

        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: linear-gradient(135deg, rgba(255, 107, 157, 0.1), rgba(78, 205, 196, 0.1));
            padding: 20px;
            border-radius: 15px;
            text-align: center;
        }

        .stat-number {
            font-size: 24px;
            font-weight: 700;
            color: #ff6b9d;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 14px;
            color: #666;
        }

        .order-item {
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 15px;
            border-left: 5px solid #ff6b9d;
        }

        .order-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .table-number {
            background: linear-gradient(135deg, #ff6b9d, #4ecdc4);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: 600;
        }

        .order-time {
            color: #666;
            font-size: 14px;
        }

        .order-items {
            margin: 10px 0;
        }

        .order-total {
            font-size: 18px;
            font-weight: 700;
            color: #ff6b9d;
            text-align: right;
            margin-top: 10px;
        }

        .order-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .success-btn {
            background: linear-gradient(135deg, #4ecdc4, #44a08d);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            flex: 1;
            transition: all 0.3s ease;
        }

        .clear-btn {
            background: linear-gradient(135deg, #ff6b9d, #ee5a52);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            flex: 1;
            transition: all 0.3s ease;
        }

        .back-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .nav-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .cart-menu-btn {
            background: linear-gradient(135deg, #ff6b9d, #4ecdc4);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .cart-menu-btn:hover {
            transform: translateY(-2px);
        }

        .pending-indicator {
            background: #ffa502;
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            margin-left: 10px;
        }

        .confirmed-indicator {
            background: #4ecdc4;
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            margin-left: 10px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 5px;
            }
            
            .logo {
                width: 250px;
                height: 250px;
                font-size: 100px;
            }
            
            .floating-cart {
                bottom: 15px;
                right: 15px;
                width: 55px;
                height: 55px;
            }
        }
    </style>
</head>
<body>
    <!-- Splash Screen -->
    <div class="splash-screen">
        <div class="splash-icon">üòä</div>
        <h1 style="color: white; font-size: 28px; text-align: center;">‡∫•‡∫∞‡∫ö‡∫ª‡∫ö‡∫™‡∫±‡ªà‡∫á‡∫≠‡∫≤‡∫´‡∫≤‡∫ô</h1>
        <p style="color: white; font-size: 16px; text-align: center; margin-top: 10px;">‡∫Å‡∫≥‡∫•‡∫±‡∫á‡ªÇ‡∫´‡∫•‡∫î...</p>
    </div>

    <div class="container">
        <!-- Home Page -->
        <div class="page active" id="homePage">
            <div class="logo">üòä</div>
            <h1 style="text-align: center; margin-bottom: 30px; font-size: 24px; color: #333;">‡∫ç‡∫¥‡∫ô‡∫î‡∫µ‡∫ï‡ªâ‡∫≠‡∫ô‡∫Æ‡∫±‡∫ö</h1>
            <button class="btn" onclick="goToTableInput()">‡ªÄ‡∫•‡∫µ‡ªà‡∫°‡∫™‡∫±‡ªà‡∫á‡∫≠‡∫≤‡∫´‡∫≤‡∫ô</button>
            <button class="btn secondary" onclick="goToAdminLogin()">‡ªÇ‡ªù‡∫î‡ªÅ‡∫≠‡∫±‡∫î‡∫°‡∫¥‡∫ô</button>
        </div>

        <!-- Table Input Page -->
        <div class="page" id="tableInputPage">
            <button class="back-btn" onclick="goToHome()">‚Üê ‡∫Å‡∫±‡∫ö‡∫Ñ‡∫∑‡∫ô</button>
            <h2 style="text-align: center; margin-bottom: 30px; color: #333;">‡∫•‡∫∞‡∫ö‡∫∏‡ªÇ‡∫ï‡∫∞</h2>
            <div class="input-group">
                <label for="tableNumber">‡ªÄ‡∫•‡∫Å‡ªÇ‡∫ï‡∫∞:</label>
                <input type="text" id="tableNumber" placeholder="‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡∫•‡∫∞‡∫ö‡∫∏‡ªÄ‡∫•‡∫Å‡ªÇ‡∫ï‡∫∞">
            </div>
            <button class="btn" onclick="setTable()">‡∫¢‡∫∑‡∫ô‡∫¢‡∫±‡∫ô</button>
        </div>

        <!-- Menu Page -->
        <div class="page" id="menuPage">
            <div class="nav-header">
                <button class="back-btn" onclick="goToHome()">‚Üê ‡∫Å‡∫±‡∫ö‡∫Ñ‡∫∑‡∫ô</button>
                <button class="cart-menu-btn" onclick="openCartMenu()">üõí ‡∫ï‡∫∞‡∫Å‡∫Æ‡ªâ‡∫≤</button>
            </div>
            <h2 style="text-align: center; margin-bottom: 20px; color: #333;">‡ªÄ‡∫°‡∫ô‡∫π‡∫≠‡∫≤‡∫´‡∫≤‡∫ô</h2>
            <div class="menu-tabs">
                <button class="tab-btn active" onclick="showMenuTab('food')">üçΩÔ∏è ‡∫≠‡∫≤‡∫´‡∫≤‡∫ô</button>
                <button class="tab-btn" onclick="showMenuTab('drinks')">ü•§ ‡ªÄ‡∫Ñ‡∫∑‡ªà‡∫≠‡∫á‡∫î‡∫∑‡ªà‡∫°</button>
            </div>
            <div id="menuContent">
                <!-- Menu items will be loaded here -->
            </div>
        </div>

        <!-- Cart Page -->
        <div class="page" id="cartPage">
            <button class="back-btn" onclick="goToMenu()">‚Üê ‡∫Å‡∫±‡∫ö‡∫Ñ‡∫∑‡∫ô</button>
            <h2 style="text-align: center; margin-bottom: 20px; color: #333;">‡∫ï‡∫∞‡∫Å‡∫Æ‡ªâ‡∫≤‡∫™‡∫¥‡∫ô‡∫Ñ‡ªâ‡∫≤</h2>
            <div id="cartContent">
                <!-- Cart items will be loaded here -->
            </div>
        </div>

        <!-- Admin Login -->
        <div class="page" id="adminLoginPage">
            <button class="back-btn" onclick="goToHome()">‚Üê ‡∫Å‡∫±‡∫ö‡∫Ñ‡∫∑‡∫ô</button>
            <h2 style="text-align: center; margin-bottom: 30px; color: #333;">‡ªÄ‡∫Ç‡∫ª‡ªâ‡∫≤‡∫™‡∫π‡ªà‡∫•‡∫∞‡∫ö‡∫ª‡∫ö‡ªÅ‡∫≠‡∫±‡∫î‡∫°‡∫¥‡∫ô</h2>
            <div class="input-group">
                <label for="adminUser">‡∫ä‡∫∑‡ªà‡∫ú‡∫π‡ªâ‡ªÉ‡∫ä‡ªâ:</label>
                <input type="text" id="adminUser" placeholder="panda">
            </div>
            <div class="input-group">
                <label for="adminPass">‡∫•‡∫∞‡∫´‡∫±‡∫î‡∫ú‡ªà‡∫≤‡∫ô:</label>
                <input type="password" id="adminPass" placeholder="123">
            </div>
            <button class="btn" onclick="adminLogin()">‡ªÄ‡∫Ç‡∫ª‡ªâ‡∫≤‡∫™‡∫π‡ªà‡∫•‡∫∞‡∫ö‡∫ª‡∫ö</button>
        </div>

        <!-- Admin Dashboard -->
        <div class="page" id="adminDashboard">
            <button class="back-btn" onclick="goToHome()">‚Üê ‡∫≠‡∫≠‡∫Å‡∫à‡∫≤‡∫Å‡∫•‡∫∞‡∫ö‡∫ª‡∫ö</button>
            <h2 style="text-align: center; margin-bottom: 20px; color: #333;">‡ªÅ‡∫≠‡∫±‡∫î‡∫°‡∫¥‡∫ô Dashboard</h2>
            <div class="menu-tabs">
                <button class="tab-btn active" onclick="showAdminTab('orders')">üìã ‡∫≠‡ªç‡ªÄ‡∫î‡∫µ‡ªÄ‡∫Ç‡∫ª‡ªâ‡∫≤</button>
                <button class="tab-btn" onclick="showAdminTab('sales')">üí∞ ‡∫™‡∫∞‡∫´‡∫º‡∫∏‡∫ö‡∫•‡∫≤‡∫ç‡∫Æ‡∫±‡∫ö</button>
                <button class="tab-btn" onclick="showAdminTab('analytics')">üìä ‡∫ß‡∫¥‡ªÄ‡∫Ñ‡∫≤‡∫∞</button>
                <button class="tab-btn" onclick="showAdminTab('expenses')">üí∏ ‡∫ö‡∫±‡∫ô‡∫ä‡∫µ</button>
            </div>
            <div id="adminContent">
                <!-- Admin content will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Floating Cart -->
    <div class="floating-cart" id="floatingCart" onclick="openFloatingCart()" style="display: none;">
        üõí
        <div class="cart-badge" id="cartBadge">0</div>
    </div>

    <!-- Cart Overlay -->
    <div class="cart-overlay" id="cartOverlay" onclick="closeFloatingCart()">
        <div class="cart-popup" onclick="event.stopPropagation()">
            <div class="cart-header">
                <h3>‡∫ï‡∫∞‡∫Å‡∫Æ‡ªâ‡∫≤‡∫™‡∫¥‡∫ô‡∫Ñ‡ªâ‡∫≤</h3>
                <button class="close-btn" onclick="closeFloatingCart()">√ó</button>
            </div>
            <div id="floatingCartContent">
                <!-- Floating cart items will be loaded here -->
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let currentTable = null;
        let cart = [];
        let orders = [];
        let expenses = [];
        let currentMenuTab = 'food';
        let currentAdminTab = 'orders';

        // Menu data
        const menuData = {
            food: [
                { name: '‡∫ï‡∫≥‡ªù‡∫µ‡ªà‡∫Ç‡∫≤‡∫ß', price: 30000 },
                { name: '‡∫ï‡∫≥‡ªù‡∫µ‡ªà‡ªÑ‡∫ß‡ªÜ', price: 30000 },
                { name: '‡∫ï‡∫≥‡∫ï‡ªà‡∫≠‡∫ô', price: 50000 },
                { name: '‡∫ï‡∫≥‡ªÄ‡∫Ç‡∫ª‡ªâ‡∫≤‡∫õ‡∫∏‡ªâ‡∫ô / ‡∫ï‡∫≥‡ªù‡∫≤‡∫Å‡∫Æ‡∫∏‡ªà‡∫á', price: 25000 },
                { name: '‡∫ï‡∫ª‡ªâ‡∫°‡ªÄ‡∫•‡∫∑‡∫≠‡∫î', price: 30000 },
                { name: '‡∫•‡∫≤‡∫ö‡∫á‡∫ª‡∫ß', price: 50000 },
                { name: '‡ªÄ‡∫Ç‡∫ª‡ªâ‡∫≤‡ªú‡∫Ω‡∫ß', price: 15000 }
            ],
            drinks: [
                { name: '‡∫ô‡ªâ‡∫≥‡∫î‡∫∑‡ªà‡∫°‡∫ô‡ªâ‡∫≠‡∫ç', price: 8000 },
                { name: '‡∫ô‡ªâ‡∫≥‡∫î‡∫∑‡ªà‡∫°‡ªÉ‡∫´‡∫ç‡ªà', price: 10000 },
                { name: '‡ªÅ‡∫õ‡∫ö‡∫ä‡∫µ‡ªà', price: 15000 }
            ]
        };

        // Utility functions
        function formatPrice(price) {
            return price.toLocaleString('lo-LA') + ' ‡∫Å‡∫µ‡∫ö';
        }

        function normalizeTableNumber(table) {
            return parseInt(table).toString();
        }

        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');
        }

        function updateCartBadge() {
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cartBadge').textContent = totalItems;
            const floatingCart = document.getElementById('floatingCart');
            if (totalItems > 0) {
                floatingCart.style.display = 'flex';
            } else {
                floatingCart.style.display = 'none';
            }
        }

        // Navigation functions
        function goToHome() {
            showPage('homePage');
            currentTable = null;
            cart = [];
            updateCartBadge();
        }

        function goToTableInput() {
            showPage('tableInputPage');
            document.getElementById('tableNumber').value = '';
        }

        function goToMenu() {
            showPage('menuPage');
            loadMenuContent();
        }

        function goToCart() {
            showPage('cartPage');
            loadCartContent();
        }

        function goToAdminLogin() {
            showPage('adminLoginPage');
            document.getElementById('adminUser').value = '';
            document.getElementById('adminPass').value = '';
        }

        function goToAdminDashboard() {
            showPage('adminDashboard');
            showAdminTab('orders');
        }

        // Table functions
        function setTable() {
            const tableInput = document.getElementById('tableNumber').value.trim();
            if (!tableInput) {
                alert('‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡∫•‡∫∞‡∫ö‡∫∏‡ªÄ‡∫•‡∫Å‡ªÇ‡∫ï‡∫∞');
                return;
            }

            const normalizedTable = normalizeTableNumber(tableInput);
            
            // Check if table has pending orders
            const hasPendingOrder = orders.some(order => 
                order.table === normalizedTable && order.status === 'pending'
            );

            if (hasPendingOrder) {
                alert('‡∫•‡ªç‡∫ñ‡ªâ‡∫≤‡∫≠‡∫≤‡∫´‡∫≤‡∫ô‡∫Ç‡∫≠‡∫á‡∫ó‡ªà‡∫≤‡∫ô‡∫Å‡∫≥‡∫•‡∫±‡∫á‡∫à‡∫∞‡∫°‡∫≤');
                return;
            }

            currentTable = normalizedTable;
            goToMenu();
        }

        // Menu functions
        function showMenuTab(tab) {
            currentMenuTab = tab;
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            loadMenuContent();
        }

        function loadMenuContent() {
            const menuContent = document.getElementById('menuContent');
            const items = menuData[currentMenuTab];
            
            menuContent.innerHTML = items.map(item => `
                <div class="menu-item">
                    <div class="menu-item-header">
                        <span class="menu-item-name">${item.name}</span>
                        <span class="menu-item-price">${formatPrice(item.price)}</span>
                    </div>
                    <div class="quantity-controls">
                        <button class="quantity-btn" onclick="changeQuantity('${item.name}', -1)">-</button>
                        <span class="quantity-display" id="qty-${item.name.replace(/\s/g, '')}">${getItemQuantity(item.name)}</span>
                        <button class="quantity-btn" onclick="changeQuantity('${item.name}', 1)">+</button>
                    </div>
                </div>
            `).join('');
        }

        function getItemQuantity(itemName) {
            const item = cart.find(item => item.name === itemName);
            return item ? item.quantity : 0;
        }

        function changeQuantity(itemName, change) {
            const menuItem = [...menuData.food, ...menuData.drinks].find(item => item.name === itemName);
            const cartItem = cart.find(item => item.name === itemName);

            if (cartItem) {
                cartItem.quantity += change;
                if (cartItem.quantity <= 0) {
                    cart = cart.filter(item => item.name !== itemName);
                }
            } else if (change > 0) {
                cart.push({
                    name: itemName,
                    price: menuItem.price,
                    quantity: change
                });
            }

            document.getElementById(`qty-${itemName.replace(/\s/g, '')}`).textContent = getItemQuantity(itemName);
            updateCartBadge();
        }

        // Cart functions
        function openCartMenu() {
            goToCart();
        }

        function openFloatingCart() {
            document.getElementById('cartOverlay').style.display = 'block';
            loadFloatingCartContent();
        }

        function closeFloatingCart() {
            document.getElementById('cartOverlay').style.display = 'none';
        }

        function loadCartContent() {
            const cartContent = document.getElementById('cartContent');
            
            if (cart.length === 0) {
                cartContent.innerHTML = '<p style="text-align: center; color: #666;">‡∫ï‡∫∞‡∫Å‡∫Æ‡ªâ‡∫≤‡∫ß‡ªà‡∫≤‡∫á‡ªÄ‡∫õ‡∫ª‡ªà‡∫≤</p>';
                return;
            }

            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            
            cartContent.innerHTML = `
                ${cart.map(item => `
                    <div class="cart-item">
                        <div class="cart-item-info">
                            <div class="cart-item-name">${item.name}</div>
                            <div class="cart-item-price">${formatPrice(item.price)} √ó ${item.quantity}</div>
                        </div>
                        <div class="quantity-controls">
                            <button class="quantity-btn" onclick="changeQuantity('${item.name}', -1); loadCartContent();">-</button>
                            <span class="quantity-display">${item.quantity}</span>
                            <button class="quantity-btn" onclick="changeQuantity('${item.name}', 1); loadCartContent();">+</button>
                        </div>
                    </div>
                `).join('')}
                <div class="cart-total">
                    ‡∫•‡∫ß‡∫°‡∫ó‡∫±‡∫á‡ªù‡∫ª‡∫î: ${formatPrice(total)}
                </div>
                <button class="btn" onclick="confirmOrder()">‡∫¢‡∫∑‡∫ô‡∫¢‡∫±‡∫ô‡∫Å‡∫≤‡∫ô‡∫™‡∫±‡ªà‡∫á</button>
            `;
        }

        function loadFloatingCartContent() {
            const floatingCartContent = document.getElementById('floatingCartContent');
            
            if (cart.length === 0) {
                floatingCartContent.innerHTML = '<p style="text-align: center; color: #666;">‡∫ï‡∫∞‡∫Å‡∫Æ‡ªâ‡∫≤‡∫ß‡ªà‡∫≤‡∫á‡ªÄ‡∫õ‡∫ª‡ªà‡∫≤</p>';
                return;
            }

            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            
            floatingCartContent.innerHTML = `
                ${cart.map(item => `
                    <div class="cart-item">
                        <div class="cart-item-info">
                            <div class="cart-item-name">${item.name}</div>
                            <div class="cart-item-price">${formatPrice(item.price)} √ó ${item.quantity}</div>
                        </div>
                        <div class="quantity-controls">
                            <button class="quantity-btn" onclick="changeQuantity('${item.name}', -1); loadFloatingCartContent();">-</button>
                            <span class="quantity-display">${item.quantity}</span>
                            <button class="quantity-btn" onclick="changeQuantity('${item.name}', 1); loadFloatingCartContent();">+</button>
                        </div>
                    </div>
                `).join('')}
                <div class="cart-total">
                    ‡∫•‡∫ß‡∫°‡∫ó‡∫±‡∫á‡ªù‡∫ª‡∫î: ${formatPrice(total)}
                </div>
                <button class="btn" onclick="confirmOrder(); closeFloatingCart();">‡∫¢‡∫∑‡∫ô‡∫¢‡∫±‡∫ô‡∫Å‡∫≤‡∫ô‡∫™‡∫±‡ªà‡∫á</button>
            `;
        }

        function confirmOrder() {
            if (cart.length === 0) {
                alert('‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å‡ªÄ‡∫°‡∫ô‡∫π‡∫Å‡ªà‡∫≠‡∫ô');
                return;
            }

            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const orderTime = new Date().toLocaleString('lo-LA');
            
            const newOrder = {
                id: Date.now(),
                table: currentTable,
                items: [...cart],
                total: total,
                time: orderTime,
                status: 'pending'
            };

            orders.push(newOrder);
            
            // Clear cart
            cart = [];
            updateCartBadge();
            
            alert('‡∫™‡∫±‡ªà‡∫á‡∫≠‡∫≤‡∫´‡∫≤‡∫ô‡∫™‡∫≥‡ªÄ‡∫•‡∫±‡∫î‡ªÅ‡∫•‡ªâ‡∫ß!\n‡ªÇ‡∫ï‡∫∞: ' + currentTable + '\n‡∫•‡∫ß‡∫°: ' + formatPrice(total));
            goToHome();
        }

        // Admin functions
        function adminLogin() {
            const username = document.getElementById('adminUser').value;
            const password = document.getElementById('adminPass').value;
            
            if (username === 'panda' && password === '123') {
                goToAdminDashboard();
            } else {
                alert('‡∫ä‡∫∑‡ªà‡∫ú‡∫π‡ªâ‡ªÉ‡∫ä‡ªâ ‡∫´‡∫º‡∫∑ ‡∫•‡∫∞‡∫´‡∫±‡∫î‡∫ú‡ªà‡∫≤‡∫ô‡∫ö‡ªç‡ªà‡∫ñ‡∫∑‡∫Å‡∫ï‡ªâ‡∫≠‡∫á');
            }
        }

        function showAdminTab(tab) {
            currentAdminTab = tab;
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            loadAdminContent();
        }

        function loadAdminContent() {
            const adminContent = document.getElementById('adminContent');
            
            switch(currentAdminTab) {
                case 'orders':
                    loadOrdersContent(adminContent);
                    break;
                case 'sales':
                    loadSalesContent(adminContent);
                    break;
                case 'analytics':
                    loadAnalyticsContent(adminContent);
                    break;
                case 'expenses':
                    loadExpensesContent(adminContent);
                    break;
            }
        }

        function loadOrdersContent(container) {
            const pendingOrders = orders.filter(order => order.status === 'pending');
            
            if (pendingOrders.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #666;">‡∫ö‡ªç‡ªà‡∫°‡∫µ‡∫≠‡ªç‡ªÄ‡∫î‡∫µ‡ªÉ‡ªù‡ªà</p>';
                return;
            }

            container.innerHTML = pendingOrders.map(order => `
                <div class="order-item">
                    <div class="order-header">
                        <span class="table-number">‡ªÇ‡∫ï‡∫∞ ${order.table}</span>
                        <span class="order-time">${order.time}</span>
                    </div>
                    <div class="order-items">
                        ${order.items.map(item => `
                            <div>${item.name} √ó ${item.quantity} = ${formatPrice(item.price * item.quantity)}</div>
                        `).join('')}
                    </div>
                    <div class="order-total">‡∫•‡∫ß‡∫°: ${formatPrice(order.total)}</div>
                    <div class="order-actions">
                        <button class="success-btn" onclick="markOrderSuccess(${order.id})">‡∫™‡∫≥‡ªÄ‡∫•‡∫±‡∫î</button>
                        <button class="clear-btn" onclick="clearOrder(${order.id})">‡∫•‡∫∂‡∫ö</button>
                    </div>
                </div>
            `).join('');
        }

        function loadSalesContent(container) {
            const completedOrders = orders.filter(order => order.status === 'completed');
            const totalRevenue = completedOrders.reduce((sum, order) => sum + order.total, 0);
            const totalExpenses = expenses.reduce((sum, expense) => sum + expense.amount, 0);
            const netProfit = totalRevenue - totalExpenses;
            const averageOrder = completedOrders.length > 0 ? totalRevenue / completedOrders.length : 0;

            container.innerHTML = `
                <div class="admin-stats">
                    <div class="stat-card">
                        <div class="stat-number">${formatPrice(totalRevenue)}</div>
                        <div class="stat-label">‡∫•‡∫≤‡∫ç‡∫Æ‡∫±‡∫ö‡∫•‡∫ß‡∫°</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">${completedOrders.length}</div>
                        <div class="stat-label">‡∫à‡∫≥‡∫ô‡∫ß‡∫ô‡∫≠‡ªç‡ªÄ‡∫î‡∫µ</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">${formatPrice(averageOrder)}</div>
                        <div class="stat-label">‡∫Ñ‡ªà‡∫≤‡ªÄ‡∫â‡∫•‡∫µ‡ªà‡∫ç‡∫ï‡ªç‡ªà‡∫≠‡ªç‡ªÄ‡∫î‡∫µ</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">${formatPrice(totalExpenses)}</div>
                        <div class="stat-label">‡∫Ñ‡ªà‡∫≤‡ªÉ‡∫ä‡ªâ‡∫à‡ªà‡∫≤‡∫ç</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">${formatPrice(netProfit)}</div>
                        <div class="stat-label">‡∫Å‡∫≥‡ªÑ‡∫•‡∫™‡∫∏‡∫î‡∫ó‡∫¥</div>
                    </div>
                </div>
            `;
        }

        function loadAnalyticsContent(container) {
            const completedOrders = orders.filter(order => order.status === 'completed');
            const itemSales = {};
            
            completedOrders.forEach(order => {
                order.items.forEach(item => {
                    if (itemSales[item.name]) {
                        itemSales[item.name] += item.quantity;
                    } else {
                        itemSales[item.name] = item.quantity;
                    }
                });
            });

            const sortedItems = Object.entries(itemSales).sort((a, b) => b[1] - a[1]);

            container.innerHTML = `
                <h3 style="margin-bottom: 20px;">‡ªÄ‡∫°‡∫ô‡∫π‡∫Ç‡∫≤‡∫ç‡∫î‡∫µ‡∫ó‡∫µ‡ªà‡∫™‡∫∏‡∫î</h3>
                ${sortedItems.length > 0 ? sortedItems.map((item, index) => `
                    <div class="menu-item">
                        <div class="menu-item-header">
                            <span class="menu-item-name">#${index + 1} ${item[0]}</span>
                            <span class="menu-item-price">${item[1]} ‡∫à‡∫≤‡∫ô</span>
                        </div>
                    </div>
                `).join('') : '<p style="text-align: center; color: #666;">‡∫ç‡∫±‡∫á‡∫ö‡ªç‡ªà‡∫°‡∫µ‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô‡∫Å‡∫≤‡∫ô‡∫Ç‡∫≤‡∫ç</p>'}
            `;
        }

        function loadExpensesContent(container) {
            const totalExpenses = expenses.reduce((sum, expense) => sum + expense.amount, 0);
            
            container.innerHTML = `
                <div class="input-group">
                    <label for="expenseDesc">‡∫•‡∫≤‡∫ç‡∫Å‡∫≤‡∫ô‡∫Ñ‡ªà‡∫≤‡ªÉ‡∫ä‡ªâ‡∫à‡ªà‡∫≤‡∫ç:</label>
                    <input type="text" id="expenseDesc" placeholder="‡ªÄ‡∫ä‡∫±‡ªà‡∫ô: ‡∫ä‡∫∑‡ªâ‡∫ß‡∫±‡∫î‡∫ñ‡∫∏‡∫î‡∫¥‡∫ö">
                </div>
                <div class="input-group">
                    <label for="expenseAmount">‡∫à‡∫≥‡∫ô‡∫ß‡∫ô‡ªÄ‡∫á‡∫¥‡∫ô (‡∫Å‡∫µ‡∫ö):</label>
                    <input type="number" id="expenseAmount" placeholder="0">
                </div>
                <button class="btn" onclick="addExpense()">‡ªÄ‡∫û‡∫µ‡ªà‡∫°‡∫Ñ‡ªà‡∫≤‡ªÉ‡∫ä‡ªâ‡∫à‡ªà‡∫≤‡∫ç</button>
                
                <h3 style="margin: 30px 0 20px 0;">‡∫•‡∫≤‡∫ç‡∫Å‡∫≤‡∫ô‡∫Ñ‡ªà‡∫≤‡ªÉ‡∫ä‡ªâ‡∫à‡ªà‡∫≤‡∫ç</h3>
                <div class="stat-card" style="margin-bottom: 20px;">
                    <div class="stat-number">${formatPrice(totalExpenses)}</div>
                    <div class="stat-label">‡∫•‡∫ß‡∫°‡∫Ñ‡ªà‡∫≤‡ªÉ‡∫ä‡ªâ‡∫à‡ªà‡∫≤‡∫ç</div>
                </div>
                
                ${expenses.length > 0 ? expenses.map((expense, index) => `
                    <div class="menu-item">
                        <div class="menu-item-header">
                            <span class="menu-item-name">${expense.description}</span>
                            <span class="menu-item-price">${formatPrice(expense.amount)}</span>
                        </div>
                        <div style="margin-top: 10px;">
                            <button class="clear-btn" onclick="removeExpense(${index})">‡∫•‡∫∂‡∫ö</button>
                        </div>
                    </div>
                `).join('') : '<p style="text-align: center; color: #666;">‡∫ç‡∫±‡∫á‡∫ö‡ªç‡ªà‡∫°‡∫µ‡∫Ñ‡ªà‡∫≤‡ªÉ‡∫ä‡ªâ‡∫à‡ªà‡∫≤‡∫ç</p>'}
            `;
        }

        function markOrderSuccess(orderId) {
            const order = orders.find(o => o.id === orderId);
            if (order) {
                order.status = 'completed';
                loadAdminContent();
            }
        }

        function clearOrder(orderId) {
            const orderIndex = orders.findIndex(o => o.id === orderId);
            if (orderIndex !== -1) {
                orders.splice(orderIndex, 1);
                loadAdminContent();
            }
        }

        function addExpense() {
            const description = document.getElementById('expenseDesc').value.trim();
            const amount = parseInt(document.getElementById('expenseAmount').value);
            
            if (!description || !amount || amount <= 0) {
                alert('‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡∫Å‡∫≠‡∫Å‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô‡ªÉ‡∫´‡ªâ‡∫Ñ‡∫ª‡∫ö‡∫ñ‡ªâ‡∫ß‡∫ô');
                return;
            }

            expenses.push({
                description: description,
                amount: amount,
                date: new Date().toLocaleString('lo-LA')
            });

            document.getElementById('expenseDesc').value = '';
            document.getElementById('expenseAmount').value = '';
            loadAdminContent();
        }

        function removeExpense(index) {
            expenses.splice(index, 1);
            loadAdminContent();
        }

        // Auto-refresh orders every 30 seconds when on admin orders tab
        setInterval(() => {
            if (document.getElementById('adminDashboard').classList.contains('active') && currentAdminTab === 'orders') {
                loadAdminContent();
            }
        }, 30000);

        // Initialize the application
        window.addEventListener('load', () => {
            setTimeout(() => {
                document.querySelector('.splash-screen').style.display = 'none';
                showPage('homePage');
            }, 3000);
        });

        // Show floating cart on scroll
        window.addEventListener('scroll', () => {
            const floatingCart = document.getElementById('floatingCart');
            if (cart.length > 0) {
                floatingCart.style.display = 'flex';
            }
        });

        // Prevent form submission on Enter key
        document.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                e.preventDefault();
                const activeElement = document.activeElement;
                if (activeElement.id === 'tableNumber') {
                    setTable();
                } else if (activeElement.id === 'adminUser' || activeElement.id === 'adminPass') {
                    adminLogin();
                }
            }
        });
    </script>
</body>
</html>
